<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<title>EndGam - Gaming Magazine Template</title>
	<meta charset="UTF-8">
	<meta name="description" content="EndGam Gaming Magazine Template">
	<meta name="keywords" content="endGam,gGaming, magazine, html">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Favicon -->
	<link href="/img/favicon.ico" rel="shortcut icon"/>

	<!-- Google Font -->
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i,900,900i" rel="stylesheet">


	<!-- Stylesheets -->
	<link rel="stylesheet" href="/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="/css/font-awesome.min.css"/>
	<link rel="stylesheet" href="/css/slicknav.min.css"/>
	<link rel="stylesheet" href="/css/owl.carousel.min.css"/>
	<link rel="stylesheet" href="/css/magnific-popup.css"/>
	<link rel="stylesheet" href="/css/animate.css"/>

	<!-- Main Stylesheets -->
	<link rel="stylesheet" href="/css/style.css"/>


	<!--[if lt IE 9]>
	<script src="/https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="/https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

</head>
<body>
<!-- Page Preloder -->
<div id="preloder">
	<div class="loader"></div>
</div>

<!-- Header section -->
<header class="header-section">
	<div class="header-warp">
		<div class="header-social d-flex justify-content-end">
			<p>Follow us:</p>
			<a href="#"><i class="fa fa-pinterest"></i></a>
			<a href="#"><i class="fa fa-facebook"></i></a>
			<a href="#"><i class="fa fa-twitter"></i></a>
			<a href="#"><i class="fa fa-dribbble"></i></a>
			<a href="#"><i class="fa fa-behance"></i></a>
		</div>
		<div class="header-bar-warp d-flex">
			<!-- site logo -->
			<a href="/" class="site-logo">
				<img src="/img/logo.png" alt="Logo">
			</a>
			<nav class="top-nav-area w-100">
				<div class="user-panel">
					<div class="auth" th:if="${isLogin}">
						<a href="/mypage">ë§ˆì´í˜ì´ì§€</a> /
						<a href="/member/logout">ë¡œê·¸ì•„ì›ƒ</a>
						<span th:if="${isAdmin != null and isAdmin}"><a href="/admin">ê´€ë¦¬ì í˜ì´ì§€</a></span>
					</div>
					<div class="auth" th:if="${!isLogin}">
						<a href="#" id="login-btn">ë¡œê·¸ì¸</a> / <a href="/member/signup">íšŒì›ê°€ì…</a>
					</div>
				</div>

				<div class="modal-overlay" id="modal-overlay" th:if="${!isLogin}"></div>

				<div class="modal" id="login-modal" th:if="${!isLogin}">
					<h2>ë¡œê·¸ì¸</h2>
					<form action="/member/login" method="post">
						<label for="login-email">ì´ë©”ì¼:</label>
						<input type="email" id="login-email" name="memberEmail" required>
						<label for="login-password">ë¹„ë°€ë²ˆí˜¸:</label>
						<input type="password" id="login-password" name="memberPassword" required>
						<button type="submit">ë¡œê·¸ì¸</button>
					</form>
					<button id="close-login-modal">ë‹«ê¸°</button>
				</div>
				<!-- Menu -->
				<ul class="main-menu primary-menu">
					<li><a href="/">í™ˆ</a></li>
					<li><a href="/search/lol">ì „ì  ê²€ìƒ‰</a>
						<ul class="sub-menu">
							<li><a href="/search/lol">ë¦¬ê·¸ì˜¤ë¸Œë ˆì „ë“œ</a></li>
							<li><a href="/search/pubg">ë°°í‹€ê·¸ë¼ìš´ë“œ</a></li>
							<li><a href="/search/cyphers">ì‚¬ì´í¼ì¦ˆ</a></li>
						</ul>
					</li>
					<li><a href="/review">íˆ¬í‘œ / ê²Œì„ ë­í‚¹</a>
						<ul class="sub-menu">
							<li><a href="/review">ê²Œì„ ë­í‚¹</a>
							<li><a href="/vote">íˆ¬í‘œ</a></li>
						</ul>
					</li>
					<li><a href="/board">ììœ ê²Œì‹œíŒ</a></li>
					<li><a href="/notice">ê³µì§€ì‚¬í•­</a></li>
				</ul>
			</nav>
		</div>
	</div>
</header>
<!-- Header section end -->


	<!-- Page top section -->
<section class="page-top-section" style="background-image: url('/img/page-top-bg/4.jpg');">
		<div class="page-info">
			<h2>ê²Œì‹œê¸€</h2>
			<div class="site-breadcrumb">
				<a href="/">í™ˆ</a>  /
				<span>ìƒì„¸ë³´ê¸°</span>
			</div>
		</div>
	</section>
	<!-- Page top end-->

<!-- boardView-Section -->
<section class="boardView-section">
	<div class="boardView-container">
		<div class="boardView-header1">
			<h1 class="boardView-title" th:text="${board.title}">ì œëª©ì…ë‹ˆë‹¤.</h1>
		</div>
		<div class="boardView-header2">
			<div class="boardView-info1">
				ğŸ‘¤<span class="boardView-nickname" th:text="${board.nickname}">ë‹‰ë„¤ì„</span>&nbsp;
				ğŸ•˜<span class="boardView-date" th:text="${#temporals.format(board.createdAt, 'MM.dd')}"></span>&nbsp;
				ğŸ‘€<span class="boardView-viewCount" th:text="${board.viewCount}">0</span>
			</div>
			<div class="boardView-menu-wrapper">
				<input type="checkbox" id="menu-toggle">
				<label for="menu-toggle" class="boardView-menu-btn">â‹®</label>
				<div class="boardView-menu-content">
					<ul>
						<li><a th:href="@{/board/modify/{id}(id=${board.id}, searchKeyword=${searchKeyword}, page=${page})}">âœï¸ìˆ˜ì •</a></li>
						<li><a th:href="@{/board/delete/{id}(id=${board.id}, searchKeyword=${searchKeyword}, page=${page})}">ğŸ—‘ï¸ì‚­ì œ</a></li>
						<li><a href="#">ğŸš¨ì‹ ê³ </a></li>
						<li><a href="#">ğŸš«ì°¨ë‹¨</a></li>
					</ul>
				</div>
			</div>
		</div>
		<hr class="boardView-separator">

		<div class="boardView-content-container">
			<p class="boardView-content" th:text="${board.content}">ë‚´ìš©ì´ ë“¤ì–´ê°ˆ ë¶€ë¶„ì…ë‹ˆë‹¤.</p>
		</div>

		<div class="boardView-footer">
			<button id="likeButton" class="likeButton">
				<span>ì¢‹ì•„ìš”</span>
				<span>ğŸ‘</span>
			</button>
			<button id="dislikeButton" class="likeButton">
				<span>ì‹«ì–´ìš”</span>
				<span>ğŸ‘</span>
			</button>
		</div>
		<hr class="boardView-separator1">

		<div class="boardView-post-navigation">
			<!-- ì´ì „ ê¸€ ë²„íŠ¼ -->
			<form th:action="@{/board/view/{id}(id=${previousPost.id})}" method="get" class="navigation-form" th:if="${previousPost != null}">
				<button id="prevButton" class="prevButton"> << ì´ì „ ê¸€</button>
				<input type="hidden" name="searchKeyword" th:value="${searchKeyword}">
				<input type="hidden" name="page" th:value="${page}">
			</form>

			<!-- ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ -->
			<form th:action="@{/board}" method="get" class="navigation-form">
				<button type="submit" class="prevButton">ëª©ë¡</button>
				<input type="hidden" name="searchKeyword" th:value="${searchKeyword}">
				<input type="hidden" name="page" th:value="${page}">
			</form>

			<!-- ë‹¤ìŒ ê¸€ ë²„íŠ¼ -->
			<form th:action="@{/board/view/{id}(id=${nextPost.id})}" method="get" class="navigation-form" th:if="${nextPost != null}">
				<button id="nextButton" class="prevButton">ë‹¤ìŒ ê¸€ >> </button>
				<input type="hidden" name="searchKeyword" th:value="${searchKeyword}">
				<input type="hidden" name="page" th:value="${page}">
			</form>
		</div>


		<div class="comment-title">ëŒ“ê¸€</div>
		<div class="comment-section">
			<ul id="commentList" class="comment-list">
					<!-- ëŒ“ê¸€ ëª©ë¡ì„ ë™ì ìœ¼ë¡œ ì¶”ê°€í•  ë¶€ë¶„ -->
			</ul>
			<div id="commentStatus" class="comment-status"></div>
		</div>

		<div class="comment-form-container">
			<form id="commentForm" class="comment-form">
				<input type="hidden" id="boardId" name="boardId" th:value="${board.id}" readonly>
				<input type="hidden" id="memberNum" name="memberNum" th:value="${memberNum}" readonly>
				<input name="content" id="content" class="comment-textarea" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”">
				<button type="submit" class="comment-submit-button">ëŒ“ê¸€ ì‘ì„±</button>
			</form>
		</div>

	</div>
</section>


<!-- Footer section -->
<footer class="footer-section">
	<div class="container">
		<div class="footer-left-pic">
			<img src="/img/footer-left-pic.png" alt="">
		</div>
		<div class="footer-right-pic">
			<img src="/img/footer-right-pic.png" alt="">
		</div>
		<a href="/" class="footer-logo">
			<img src="/img/logo.png" alt="">
		</a>
		<ul class="main-menu footer-menu">
			<li><a href="/">í™ˆ</a></li>
			<li><a href="/search/lol">ì „ì  ê²€ìƒ‰</a></li>
			<li><a href="/rank/review">ê²Œì„ ë­í‚¹</a></li>
			<li><a href="/boardList">ììœ ê²Œì‹œíŒ</a></li>
			<li><a href="/notice">ê³µì§€ì‚¬í•­</a></li>
		</ul>
		<div class="footer-social d-flex justify-content-center">
			<a href="#"><i class="fa fa-pinterest"></i></a>
			<a href="#"><i class="fa fa-facebook"></i></a>
			<a href="#"><i class="fa fa-twitter"></i></a>
			<a href="#"><i class="fa fa-dribbble"></i></a>
			<a href="#"><i class="fa fa-behance"></i></a>
		</div>
		<div class="copyright"><a href="">Colorlib</a> 2018 @ All rights reserved</div>
	</div>
</footer>
<!-- Footer section end -->


	<!--====== Javascripts & Jquery ======-->
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.slicknav.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.sticky-sidebar.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/main.js"></script>
<script>
	$(document).ready(function (){
		const boardId = $("#boardId").val();

		// ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™”
		function loadComments() {
			$.ajax({
				type: "GET",
				url: "/comments/board/" + boardId,
				success: function (response) {
					$("#commentList").empty();
					response.forEach(function (comment) {
						$("#commentList").append(
								"<li><div class='comment-nickname'><strong>" + comment.nickname + "</strong> <em>(" + comment.createdAt + ")</em></div>" +
								"<div class='comment-content'>" + comment.content + "</div></li>" +
								"<button onclick=\"showEditForm(${comment.id})\">ìˆ˜ì •</button>\n" +
								"<button onclick=\"deleteComment(${comment.id})\">ì‚­ì œ</button>" +
								"<hr class='boardView-separator'>"
						);
					});
				},
				error: function(xhr, status, error) {
					console.error("ëŒ“ê¸€ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
				}
			});
		}

		// í˜ì´ì§€ ë¡œë“œ ì‹œ ëŒ“ê¸€ ëª©ë¡ ë¡œë“œ
		loadComments();

		// ëŒ“ê¸€ ì²˜ë¦¬ í•¨ìˆ˜
		$("#commentForm").submit(function(event) {
			event.preventDefault();
			const formData = {
				boardId: $("#boardId").val(),
				memberNum: $("#memberNum").val(),
				content: $("#content").val()
			};

			$.ajax({
				type: "POST",
				url: "/comments",
				contentType: "application/json",
				data: JSON.stringify(formData),
				success: function(response) {
					$("#commentStatus").html("<p>" + response.message + "</p>");
					$("#content").val("");
					loadComments();
				},
				error: function(xhr, status, error) {
					$("#commentStatus").html("<p>ì˜¤ë¥˜: " + xhr.responseText + "</p>");
				}
			});
		});

		// ëŒ“ê¸€ ìˆ˜ì • í¼ í‘œì‹œ
		window.showEditForm = function(id) {
			$(`#edit-form-${id}`).toggle();
		};

		// ëŒ“ê¸€ ìˆ˜ì • ì €ì¥
		window.saveEdit = function(id) {
			const content = $(`#edit-content-${id}`).val();

			$.ajax({
				type: "PUT",
				url: `/comments/${id}`,
				contentType: "application/json",
				data: JSON.stringify({ content: content }),
				success: function(response) {
					$("#commentStatus").html("<p>" + response.message + "</p>");
					loadComments();
				},
				error: function(xhr, status, error) {
					$("#commentStatus").html("<p>ì˜¤ë¥˜: " + xhr.responseText + "</p>");
				}
			});
		};

		// ëŒ“ê¸€ ì‚­ì œ
		window.deleteComment = function(id) {
			$.ajax({
				type: "DELETE",
				url: `/comments/${id}`,
				success: function(response) {
					$("#commentStatus").html("<p>" + response.message + "</p>");
					loadComments();
				},
				error: function(xhr, status, error) {
					$("#commentStatus").html("<p>ì˜¤ë¥˜: " + xhr.responseText + "</p>");
				}
			});
		};
	});
</script>
	</body>
</html>
